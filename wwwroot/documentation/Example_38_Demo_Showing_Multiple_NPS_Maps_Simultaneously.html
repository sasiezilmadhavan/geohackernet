<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <link rel="icon" href="favicon.ico" />
    <title>Example #38 - Demo Showing Multiple NPS Maps Simultaneously</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./resources/bootstrap.min.css">
    <link rel="stylesheet" href="./resources/jquery-ui-1.10.3.custom.css">
    <link rel="stylesheet" href="./resources/font-awesome.min.css">
    <link rel="stylesheet" href="./resources/prism.css">
    <link rel="stylesheet" href="./resources/demobrowser.css">
    <link rel="stylesheet" href="./resources/altus.css">
    <link rel="stylesheet" href="./resources/docs.css">
    <script src="./resources/jquery-1.9.1.min.js" type="text/javascript"></script>
    <script src="./resources/jquery-migrate-1.2.1.min.js" type="text/javascript"></script>
    <script src="./resources/bootstrap.js" type="text/javascript"></script>
    <script src="./resources/holder.js" type="text/javascript"></script>
    <script src="./resources/jquery-ui-1.10.3.custom.min.js" type="text/javascript"></script>
    <script src="./resources/prism.js" type="text/javascript"></script>
    <script src="./resources/demo.js" type="text/javascript"></script>
  </head>

  <body>
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          
          <button class="navbar-toggle" type="button" data-toggle="collapse" data-target="navbar-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="Example_38_Demo_Showing_Multiple_NPS_Maps_Simultaneously.html">Altus Platform - Example #38 - Demo Showing Multiple NPS Maps Simultaneously</a>
        </div>
        
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right">
            <li id="Documentation"><a href="http://releases.ba3.us/latest/">Home</a></li>
            <li id="iOS"><a href="../../../iOS/AltusMappingEngine/documentation/index.html">iOS</a></li>
            <li id="Android"><a href="../../../Android/AltusMappingEngine/documentation/index.html">Android</a></li>
            <li id="Windows"><a href="../../../Windows/AltusMappingEngine/documentation/index.html">Windows</a></li>
            <li id="Web"><a href="../../../Web/AltusMappingEngine/documentation/index.html">Web</a></li>
            <li id="Server"><a href="../../../Unix/AltusServer/documentation/index.html">Server</a></li>
            <li><a href="http://www.ba3.us">BA3</a></li>
          </ul>
        </div>
      </div>
    </nav>
    
    <div class="container-fluid">
        <div class="row">
            <div class="col-sm-3 col-md-2 sidebar">
                <ul id="sidebar_list" class="nav nav-sidebar">
                </ul>
            </div>
            <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
            
    <div style="position:relative; width:100%; height:75vh; overflow:hidden;" id="AltusDiv"></div>

<h5><span>Tiles: Mapbox.com Aerial<span class='spacer'></span></span></h5>
<font face="arial,helvetica">
<center>

    <table><tr>

        <td valign=top>
            <font face="arial,helvetica" size=10>
            <b>Top 10<br>
            National<br>
            Parks
            <br></b>
            </font>
<font face="arial,helvetica">
            (Shift-drag to see terrain<br>See instructions below)
            </font>
</td>

<!--Controls for location type-->
<td class="controlgroup" valign=top>
  <fieldset id="location1TypeGroup" disabled="true">
    <font face="arial,helvetica">
          <legend>Top 5</legend>
          <input type="checkbox" name="cb-grsm" id="cb-grsm" onchange="changegrsmMap(document.getElementById('cb-grsm').checked)">
          <label for="cb-grsm">Great Smokey Mountains</label>
          <br>
          <input type="checkbox" name="cb-grca" id="cb-grca" onchange="changegrcaMap(document.getElementById('cb-grca').checked)">
          <label for="cb-grca">Grand Canyon</label>
          <br>
          <input type="checkbox" name="cb-yose" id="cb-yose" onchange="changeyoseMap(document.getElementById('cb-yose').checked)">
          <label for="cb-yose">Yosemite</label>
          <br>
          <input type="checkbox" name="cb-yell" id="cb-yell" onchange="changeyellMap(document.getElementById('cb-yell').checked)">
          <label for="cb-yell">Yellowstone</label>
          <br>
          <input type="checkbox" name="cb-romo" id="cb-romo" onchange="changeromoMap(document.getElementById('cb-romo').checked)">
          <label for="cb-romo">Rocky Mountains</label>
          </font>
  </fieldset>
</td>

<!--Controls for location type-->
<td class="controlgroup" valign=top>
  <fieldset id="location2TypeGroup" disabled="true">
    <font face="arial,helvetica">
          <legend>Next 5</legend>
          <input type="checkbox" name="cb-olym" id="cb-olym" onchange="changeolymMap(document.getElementById('cb-olym').checked)">
          <label for="cb-olym">Olympic</label>
          <br>
          <input type="checkbox" name="cb-zion" id="cb-zion" onchange="changezionMap(document.getElementById('cb-zion').checked)">
          <label for="cb-zion">Zion</label>
          <br>
          <input type="checkbox" name="cb-grte" id="cb-grte" onchange="changegrteMap(document.getElementById('cb-grte').checked)">
          <label for="cb-grte">Grand Tetons</label>
          <br>
          <input type="checkbox" name="cb-acad" id="cb-acad" onchange="changeacadMap(document.getElementById('cb-acad').checked)">
          <label for="cb-acad">Acadia (Maine)</label>
          <br>
          <input type="checkbox" name="cb-glba" id="cb-glba" onchange="changeglbaMap(document.getElementById('cb-glba').checked)">
          <label for="cb-glba">Glacier Bay (near Anchorage)</label>
          </font>
  </fieldset>
</td>

<!--Controls for location type-->
<td class="controlgroup" valign=top>
  <fieldset id="location3TypeGroup" disabled="true">
    <font face="arial,helvetica">
          <legend>Bonus</legend>
<!--          <input type="checkbox" name="cb-blri" id="cb-blri" onchange="changeblriMap(document.getElementById('cb-blri').checked)">
          <label for="cb-blri">Blue Ridge Parkway</label>
          <br> -->
          <input type="checkbox" name="cb-ever" id="cb-ever" onchange="changeeverMap(document.getElementById('cb-ever').checked)">
          <label for="cb-ever">Everglades</label>
          <br>
          <input type="checkbox" name="cb-gett" id="cb-gett" onchange="changegettMap(document.getElementById('cb-gett').checked)">
          <label for="cb-gett">Gettysburg</label>
          <br>
          <input type="checkbox" name="cb-seki" id="cb-seki" onchange="changesekiMap(document.getElementById('cb-seki').checked)">
          <label for="cb-seki">Sequoia</label>
          <br>
          <input type="checkbox" name="cb-lecl" id="cb-lecl" onchange="changeleclMap(document.getElementById('cb-lecl').checked)">
          <label for="cb-lecl">Lewis and Clark Trail</label>
          </font>
  </fieldset>
</td>

</tr>
</table>
<p>
  <p>
    <p>
      <b>About the technology</b>
      <p>
        This web page is made possible by the the BA3 Altus Mapping Engine, specifically Altus Web. You can learn more about Altus at <a href="http://BA3.us">http://BA3.us</a>.
        <p>
          <b>Description</b>
          <p>
            This is a viewer for the <a href="http://travel.nationalgeographic.com/travel/national-parks/most-visited-parks-photos/">Top 10
Most Visited National Parks</a> in the United States. Five bonus parks are included as well.
            <p>
              <b>Instructions</b>
              <p>
                Here are several things to try with this application:
                <ol>
                  <li>Double-click to zoom in, double-right-click to zoom out. Drag to pan.
                    <p>
                      <li>If you click on any of the 15 maps, you will see it appear on the globe. Some of the maps are small (example: Gettysburg, Pennsylvania), so you may need to zoom in a bit to find it.
                        <p>
                          <li>The maps are overlaid on top of aerial photos of the world taken by satellite. You can use the slider to turn the maps various shades of transparent. Or, find a spot on the map, then click the check box again to turn the map
                            off, and then you can see what is on the ground at that location.
                            <p>
                              <li>If you hold down the shift key as you pan, you can tilt the map and see terrain. For example, zoom in on Rocky Mountain Nation Park, use shift-drag to tilt the map, and you can create views like this, where the map is overlaid
                                on terrain:
                                <p>
                                  <center>
                                    <img src="http://marshallbrain.com/altus/ss/rocky-mountain-view.jpg" width=50% height=50%>
                                    <p>
                                  </center>
                                  <li> If you ever get lost, simply refresh the page to reset.
                                    <p>
                                      Web page performance will decline if many maps are visible simultaneously. This web page is not recommended for mobile devices.
                </ol>
                <p>
                  <b>About the technology</b>
                  <p>
                    This application is made possible by the the BA3 Altus Mapping Engine, specifically Altus Web. Documentation and tutorials are available at
                    <a href="http://builds.BA3.us">http://BA3.us</a> so that you can create your own web pages with Altus.
                    <p>
                      If you find yourself thinking, "I wish it would...", chances are you can modify the page and make it do that. See the examples here: <a href="https://jsfiddle.net/user/BA3User/fiddles/">https://jsfiddle.net/user/BA3User/fiddles/</a>
                    </p>
                    </center>
                    <p>
                      Maps: © <a href='https://www.mapbox.com/about/maps/'>Mapbox</a> © <a href='http://www.openstreetmap.org/copyright'>OpenStreetMap</a>
                      <p>
                        More info:
                        <ul>
                          <li>Product information: <a href="http://ba3.us">http://ba3.us</a>
                            <li>Q and A forum: <a href="http://forum.ba3.us">http://forum.ba3.us</a>
                              <li>All of BA3's current builds: <a href="http://releases.ba3.us">http://releases.ba3.us</a>
                                <li>Ask questions: info@ba3.us
                        </ul>
<script src="altus.js" type="text/javascript"></script>
<script type="text/javascript">
// BA3 ALTUS WEB EXAMPLE #38
// This demonstrates how to create a simple user interface and show 
// multiple NPS maps simultaneously. See example #34 for instructions 
// on creating the maps.
// More info: http://ba3.us, forum.ba3.us, releases.ba3.us, info@ba3.us
// Almost any tile server is possible in your own apps. 
// See http://tinyurl.com/h8wahej for details. 

//Instantiate engine
var AltusUnified = new Altus(document.getElementById("AltusDiv"));

//Called by the mapping engine after it has initialized
function onAltusEngineReady() {
  solveJsfiddleProblem();
  installBaseMap();
  add3DTerrain();
  positionCamera3D(38, -98, 6000000, 0, 90, 0); // lat, lon, alt (meters), roll, pitch, yaw

  //Enable UI
  document.getElementById("location1TypeGroup").disabled = false;
  document.getElementById("location2TypeGroup").disabled = false;
  document.getElementById("location3TypeGroup").disabled = false;
};

function AddNewMap(num, mapName, mapUrl) {
  //Create a tile provider that will serve up the tiles
  var internetTileProvider = new AltusUnified.InternetTileProvider(mapName, mapUrl);

  //Create a map description and map object
  var mapDesc = AltusUnified.VirtualMap.defaultRasterMapDesc();

  mapDesc.maxLevel = 16;

  var newMap = new AltusUnified.VirtualMap(mapName, mapDesc, internetTileProvider);

  //Add the new map
  AltusUnified.scene.addMap(newMap);
  newMap.setOrder(100 + num);

  //Clean up
  mapDesc.delete();
  internetTileProvider.delete();

  return newMap;
}

//This function exists to solve a problem in jsfiddle with keyboard
//clicks in the canvas. Without this function, shift-drag and
//ctrl-drag work do not work in jsfiddle. You should not need
//this function outside of jsfiddle. You should not need
//this function outside of jsfiddle. 
function solveJsfiddleProblem() {
  AltusUnified.canvas.setAttribute('tabindex', '1');
  AltusUnified.canvas.addEventListener('click', function(event) {
    AltusUnified.canvas.blur();
    AltusUnified.canvas.focus();
  });
}

//Loads 3D terrain
function add3DTerrain() {
  //Create the tile provider
  var internetTileProvider = new AltusUnified.InternetTileProvider.createFromURLWithSubdomainsAndFormat(
    "baseMapHeight",
    "https://maps.ba3.us/terrain/2bytepng/noborder/{z}/{x}/{y}.png",
    "",
    true,
    AltusUnified.MapFormat.TERRAIN_HEIGHT);

  //Create the terrain map object
  var baseDesc = AltusUnified.VirtualMap.defaultTerrainMapDesc();
  var terrainMap = new AltusUnified.VirtualMap("terrain3D", baseDesc, internetTileProvider);

  //Add the terrain map
  AltusUnified.scene.addMap(terrainMap);

  //Disable tile biasing (to minimize the amount of data loaded)
  AltusUnified.scene.screen().setTileLevelBias(0);

  //Clean up
  terrainMap.delete();
  baseDesc.delete();
  internetTileProvider.delete();
}

function positionCamera3D(lat, lon, altitude, roll, pitch, yaw) {
  // create position object
  var pos = new AltusUnified.GeographicPosition(lat, lon, altitude);

  // create orientation object - camera pointed like standard 2D map view
  var orientation = new AltusUnified.Orientation(roll, pitch, yaw);

  // create default scale object
  var scale = new AltusUnified.vec3d(1, 1, 1);

  // set transfrom to scene
  // More info on transforms here: http://tinyurl.com/z2c94lb
  var trans = new AltusUnified.Transform(pos, orientation, scale);
  AltusUnified.scene.camera().transform.set(trans);

  // clean up
  pos.delete();
  orientation.delete();
  scale.delete();
}

function AddNewMap2(num, mapName, mapUrl, lat1, lon1, lat2, lon2) {
  //Create a tile provider that will serve up the tiles
  var internetTileProvider = new AltusUnified.InternetTileProvider(mapName, mapUrl);

  //Create a map description and map object
  var mapDesc = AltusUnified.VirtualMap.defaultRasterMapDesc();

  // Set the bounding box to avoid unneeded tiles being read
  mapDesc.bounds_set(new AltusUnified.GeoBoundingBox(lat1, lon1, lat2, lon2));

  var newMap = new AltusUnified.VirtualMap(mapName, mapDesc, internetTileProvider);

  //Add the new map
  AltusUnified.scene.addMap(newMap);
  newMap.setOrder(100 + num);

  //Clean up
  mapDesc.delete();
  internetTileProvider.delete();
  return newMap;
}

function installBaseMap() {

  //Internal name of map
  var mapName = "BaseMap"

  //Url template for raster map tiles
  var mapUrl = "https://a.tiles.mapbox.com/v4/dxjacob.ho6k3ag9/{z}/{x}/{y}.jpg?access_token=pk.eyJ1IjoiZHhqYWNvYiIsImEiOiJwYXotMmtVIn0.rvNzd7EZTKqynbx-9BQdtA";


  //Create a tile provider that will serve up the tiles
  var internetTileProvider = new AltusUnified.InternetTileProvider(mapName, mapUrl);

  //Create a map description and map object
  var mapDesc = AltusUnified.VirtualMap.defaultRasterMapDesc();
  var newMap = new AltusUnified.VirtualMap(mapName, mapDesc, internetTileProvider);

  newMap.setOrder(1);

  //Add the new map
  AltusUnified.scene.addMap(newMap);

  //no dark side (delete this line and spin the globe to see what I mean)
  AltusUnified.scene.atmospherics().setSunLocationType(AltusUnified.LocationType.DIRECTION_VIEW_OFFSET);

  //Make the sky blue
  AltusUnified.scene.atmospherics().setLightingType(AltusUnified.LightingType.REALISTIC);

  //Know what version of the engine is in use. Press F12 to see.
  console.log("Version Tag - " + AltusUnified.Scene.versionTag());

  //Clean up
  newMap.delete();
  mapDesc.delete();
  internetTileProvider.delete();
};

var blriOn = 0;
var grcaOn = 0;
var everOn = 0;
var gettOn = 0;
var sekiOn = 0;
var yoseOn = 0;
var grsmOn = 0;
var yellOn = 0;
var romoOn = 0;
var leclOn = 0;
var grteOn = 0;
var olymOn = 0;
var acadOn = 0;
var glbaOn = 0;
var zionOn = 0;
var everMap;
var blriMap;
var gettMap;
var grcaMap;
var sekiMap;
var yoseMap;
var grsmMap;
var romoMap;
var leclMap;
var grteMap;
var olymMap;
var glbaMap;
var zionMap;
var acadMap;

function changeblriMap(checked) {

  console.log("hello");
  if (blriOn == 0) {
    blriOn = 1;
    blriMap = AddNewMap(1, "blri overlay", "https://maps.ba3.us/us-nps/BLRI2map1/{z}/{x}/{y}.png");
    console.log("hello1");

  } else {
    blriOn = 0;
    AltusUnified.scene.removeMap(blriMap, true);
    blriMap.delete();
    console.log("hello2");

  }
}

function changeeverMap(checked) {
  if (everOn == 0) {
    everOn = 1;
    everMap = AddNewMap(1, "ever overlay", "https://maps.ba3.us/us-nps/EVERmap1/{z}/{x}/{y}.png");
  } else {
    everOn = 0;
    AltusUnified.scene.removeMap(everMap, true);
    everMap.delete();
  }
}

function changegettMap(checked) {
  if (gettOn == 0) {
    gettOn = 1;
    gettMap = AddNewMap(4, "gett overlay", "https://maps.ba3.us/us-nps/GETTmap1/{z}/{x}/{y}.png");
  } else {
    gettOn = 0;
    AltusUnified.scene.removeMap(gettMap, true);
    gettMap.delete();
  }
}

function changegrcaMap(checked) {
  if (grcaOn == 0) {
    grcaOn = 1;
    grcaMap = AddNewMap(6, "grca overlay", "https://maps.ba3.us/us-nps/GRCAmap1/{z}/{x}/{y}.png");
  } else {
    grcaOn = 0;
    AltusUnified.scene.removeMap(grcaMap, true);
    grcaMap.delete();
  }
}

function changesekiMap(checked) {
  if (sekiOn == 0) {
    sekiOn = 1;
    sekiMap = AddNewMap(6, "seki overlay", "https://maps.ba3.us/us-nps/SEKImap1/{z}/{x}/{y}.png");
  } else {
    sekiOn = 0;
    AltusUnified.scene.removeMap(sekiMap, true);
    sekiMap.delete();
  }
}

function changeyoseMap(checked) {
  if (yoseOn == 0) {
    yoseOn = 1;
    yoseMap = AddNewMap(6, "yose overlay", "https://maps.ba3.us/us-nps/YOSEmap1/{z}/{x}/{y}.png");
  } else {
    yoseOn = 0;
    AltusUnified.scene.removeMap(yoseMap, true);
    yoseMap.delete();
  }
}

function changegrsmMap(checked) {
  if (grsmOn == 0) {
    grsmOn = 1;
    grsmMap = AddNewMap(6, "grsm overlay", "https://maps.ba3.us/us-nps/GRSMmap1/{z}/{x}/{y}.png");
  } else {
    grsmOn = 0;
    AltusUnified.scene.removeMap(grsmMap, true);
    grsmMap.delete();
  }
}

function changeromoMap(checked) {
  if (romoOn == 0) {
    romoOn = 1;
    romoMap = AddNewMap(6, "romo overlay", "https://maps.ba3.us/us-nps/ROMOmap1/{z}/{x}/{y}.png");
  } else {
    romoOn = 0;
    AltusUnified.scene.removeMap(romoMap, true);
    romoMap.delete();
  }
}

function changeyellMap(checked) {
  if (yellOn == 0) {
    yellOn = 1;
    yellMap = AddNewMap(6, "yell overlay", "https://maps.ba3.us/us-nps/YELLmap1/{z}/{x}/{y}.png");
  } else {
    yellOn = 0;
    AltusUnified.scene.removeMap(yellMap, true);
    yellMap.delete();
  }
}

function changeleclMap(checked) {
  if (leclOn == 0) {
    leclOn = 1;
    leclMap = AddNewMap(6, "lecl overlay", "https://maps.ba3.us/us-nps/LECLmap1/{z}/{x}/{y}.png");
  } else {
    leclOn = 0;
    AltusUnified.scene.removeMap(leclMap, true);
    leclMap.delete();
  }
}

function changeglbaMap(checked) {
  if (glbaOn == 0) {
    glbaOn = 1;
    glbaMap = AddNewMap(6, "glba overlay", "https://maps.ba3.us/us-nps/GLBAmap1/{z}/{x}/{y}.png");
  } else {
    glbaOn = 0;
    AltusUnified.scene.removeMap(glbaMap, true);
    glbaMap.delete();
  }
}

function changegrteMap(checked) {
  if (grteOn == 0) {
    grteOn = 1;
    grteMap = AddNewMap(6, "grte overlay", "https://maps.ba3.us/us-nps/GRTEmap1/{z}/{x}/{y}.png");
  } else {
    grteOn = 0;
    AltusUnified.scene.removeMap(grteMap, true);
    grteMap.delete();
  }
}

function changezionMap(checked) {
  if (zionOn == 0) {
    zionOn = 1;
    zionMap = AddNewMap(6, "zion overlay", "https://maps.ba3.us/us-nps/ZIONmap1/{z}/{x}/{y}.png");
  } else {
    zionOn = 0;
    AltusUnified.scene.removeMap(zionMap, true);
    zionMap.delete();
  }
}

function changeolymMap(checked) {
  if (olymOn == 0) {
    olymOn = 1;
    olymMap = AddNewMap(6, "olym overlay", "https://maps.ba3.us/us-nps/OLYMmap1/{z}/{x}/{y}.png");
  } else {
    olymOn = 0;
    AltusUnified.scene.removeMap(olymMap, true);
    olymMap.delete();
  }
}

function changeacadMap(checked) {
  if (acadOn == 0) {
    acadOn = 1;
    acadMap = AddNewMap(6, "acad overlay", "https://maps.ba3.us/us-nps/ACADmap1/{z}/{x}/{y}.png");
  } else {
    acadOn = 0;
    AltusUnified.scene.removeMap(acadMap, true);
    acadMap.delete();
  }
}
</script>
            </div>
        </div>
        <hr>
        <p align="right">AltusMappingEngine Web v2.0.ut.2153.g60764257e master</p>
        <p align="right">COPYRIGHT (C) 2017, BA3, LLC ALL RIGHTS RESERVED</p>
    </div>
    
    
    <script src="js/contents.js"></script>
    <script src="js/sidebar.js"></script>
    <script src="js/prism.js"></script>

<script>
<!--
//Activate the current side bar list item
document.getElementById('Example_38_Demo_Showing_Multiple_NPS_Maps_Simultaneously').className="active";
//Activate the current OS in the top nav bar
document.getElementById('Web').className="active";
-->
</script>


</body>
</html>
